pure_pursuit_node:
  ros__parameters:
    # Waypoint file path
    csv_file_path: "/home/ircv7/RACE/real_ws/map_global_path_bound/global_paths/1017_6.0.csv"

    # Pure Pursuit parameters
    lookahead_distance: 0.9
    max_speed: 5.0
    min_speed: 1.0
    max_steering_angle: 0.40  # 24 degrees in radians
    wheelbase: 0.33  # F1TENTH wheelbase

    # PID parameters for speed control
    speed_kp: 1.0
    speed_ki: 0.1
    speed_kd: 0.05
    speed_max_integral: 2.0
    speed_max_output: 5.0

    # Curvature-based speed control parameters
    enable_curvature_control: true    # Enable/disable curvature-based speed reduction
    max_curvature: 1.1               # Maximum curvature threshold (1/m)
    min_curve_speed: 3.0             # Minimum speed in tight curves (m/s)
    curvature_speed_factor: 0.8      # Speed reduction factor (0.0 = no reduction, 1.0 = maximum reduction)
    curve_lookahead_points: 6        # Number of waypoints ahead to check for curves

    # Adaptive lookahead and steering smoothing parameters
    enable_adaptive_lookahead: false  # Disable adaptive lookahead for now
    min_lookahead_distance: 0.7      # Minimum lookahead distance (m)
    max_lookahead_distance: 2.5      # Maximum lookahead distance (m)
    lookahead_speed_factor: 0.1      # Very conservative speed adjustment
    steering_smoothing_factor: 0.3   # Light smoothing (0.0 = no smoothing, 1.0 = maximum smoothing)

# Alternative CSV files for easy switching
# Uncomment and change csv_file_path to switch between different racelines
#
# Available raceline files:
# - "/home/f1/f1tenth_ws/maps_racelines_/raceline/0927_speed_3.csv"  # Conservative speed
# - "/home/f1/f1tenth_ws/maps_racelines_/raceline/0927_speed_4.csv"  # Medium speed
# - "/home/f1/f1tenth_ws/maps_racelines_/raceline/0927_speed_5.csv"  # High speed
# - "/home/f1/f1tenth_ws/maps_racelines/raceline/0927_speed_6.csv"  # Maximum speed
#
# To use a different raceline:
# 1. Change the csv_file_path above
# 2. Restart the node: Ctrl+C and relaunch
# 3. No need to rebuild!

# ========================================================================
# TESTED WORKING CONFIGURATION FOR SPEED_4 CSV - DO NOT MODIFY THIS SECTION
# ========================================================================
# Date: 2025-09-27
# CSV File: /home/f1/f1tenth_ws/maps_racelines_/raceline/0927_speed_4.csv
# Status: CONFIRMED WORKING - 잘 작동하는 설정
#
# Working parameters:
# - lookahead_distance: 1.5
# - max_speed: 8.0
# - min_speed: 1.0
# - max_steering_angle: 0.4189
# - wheelbase: 0.33
# - speed_kp: 1.0, speed_ki: 0.1, speed_kd: 0.05
# - enable_curvature_control: true
# - max_curvature: 1.7
# - min_curve_speed: 2.5
# - curvature_speed_factor: 0.7
# - curve_lookahead_points: 6
# - enable_adaptive_lookahead: false
# - steering_smoothing_factor: 0.3
#
# 참고: 이 설정값들은 speed_4에서 검증된 안정적인 주행이 가능한 값입니다.
#       향후 튜닝 시 참고용으로 사용하세요.
# ========================================================================
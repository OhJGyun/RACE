lane_selector_node:
  ros__parameters:
    # TF localization (map -> base_link) like map_controller
    tf_timeout: 0.3

    # 장애물 정보 토픽 (PoseArray from ring_viz_node or joon_obs_node)
    obstacles_topic: "/scan_viz/obstacles"

    # 레인 CSV (센터 + 좌/우 보조 레인)
    # CRITICAL: These paths MUST exactly match map_control_params.yaml lane_csv_paths!
    lane_csv_paths:
      - "/home/ircv7/RACE/path/f1_3/test_7.0/lane_optimal.csv"  # Lane 0: 센터 최적 라인
      - "/home/ircv7/RACE/path/f1_3/test_7.0/lane_left.csv"     # Lane 1: 왼쪽 회피 라인
      - "/home/ircv7/RACE/path/f1_3/test_7.0/lane_right.csv"    # Lane 2: 오른쪽 회피 라인

    # 레인 선택 파라미터
    lane_topic: "/lane_selector/target_lane"
    lookahead_distance: 15.0        # 전방 감지 거리 (미터)
    obstacle_clearance: 0.65         # 장애물과 레인 간 최소 클리어런스 (미터)
    forward_min_distance: 0.0       # 전방 장애물 최소 감지 거리 (미터)
    min_switch_interval: 1.5       # 레인 변경 최소 간격 (초)
    update_rate_hz: 50.0            # 레인 평가 업데이트 빈도 (Hz)

    # ✅ 동적/정적 장애물 별도 detection hold time (코드 77-78번 줄)
    static_detection_hold_time: 0.0    # 정적 장애물 감지 유지 시간 (0ms)
    dynamic_detection_hold_time: 0.0   # 동적 장애물 감지 유지 시간 (50ms)

    # ✅ Local Planner 확장: 로컬 세그먼트 인덱스 범위 (전방/후방 분리)
    local_index_margin_forward: 100   # 차량 위치 기준 전방 인덱스 범위
    local_index_margin_backward: 30   # 차량 위치 기준 후방 인덱스 범위

    # ✅ SCC (Smart Cruise Control) 파라미터 (코드 85-86번 줄)
    # SCC는 동적 장애물 감지 시 자동으로 속도를 줄이는 기능입니다.
    # lane_selector는 SCC 활성화 신호만 보내고, 실제 속도 제어는 map_control에서 수행합니다.
    #
    # 속도 감소율은 map_control_params.yaml의 scc_speed_gain으로 조정하세요:
    #   - scc_speed_gain: 0.7  → 70% 속도로 감속 (30% 감소) ← 기본값
    #   - scc_speed_gain: 0.5  → 50% 속도로 감속 (50% 감소, 더 보수적)
    #   - scc_speed_gain: 0.9  → 90% 속도로 감속 (10% 감소, 더 공격적)
    scc_enabled: true                   # SCC 기능 활성화 여부
    scc_topic: "/control/scc_active"    # SCC 상태 토픽 (Int32: 1=active, 0=inactive)

    # 시각화
    marker_frame_id: "map"

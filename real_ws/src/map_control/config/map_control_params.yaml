/**:
  ros__parameters:
    # ========================================================================
    # MAP HUMBLE - Unified MAP Controller Configuration
    # Combines multi-lane support + TF-based localization
    # ========================================================================

    # ------------------------------------------------------------------------
    # Waypoint Configuration (Multi-lane Support)
    # ------------------------------------------------------------------------
    # Primary waypoint file (used as default lane)
    csv_file_path: "/home/ircv7/RACE/path/f1_3/test_7.0/lane_optimal.csv"

    # Multiple lane paths for dynamic lane switching
    # Lane order MUST match the lane_selector output indices!                               
    lane_csv_paths:
    - "/home/ircv7/RACE/path/f1_3/test_7.0/lane_optimal.csv"  # Lane 0: Optimal/Center
    - "/home/ircv7/RACE/path/f1_3/test_7.0/lane_left.csv"     # Lane 1: Left avoidance
    - "/home/ircv7/RACE/path/f1_3/test_7.0/lane_right.csv"    # Lane 2: Right avoidance

    # Lane selector topic (receives Int32 lane index)
    lane_selector_topic: "/lane_selector/target_lane"

    # ðŸ”„ Lane segment topic (receives Int32MultiArray with [lane_id, start_idx, end_idx, num_points])
    lane_segment_topic: "/lane_selector/current_segment"

    # Lane change behavior: reduce LD and speed during lane changes for better tracking
    lane_change_ld_gain: 0.7     # LD multiplier during lane change [0.0-1.0] (0.5 = 50% reduction)
    lane_change_speed_gain: 0.7  # Speed multiplier during lane change [0.0-1.0] (0.7 = 30% reduction)

    # ðŸš¦ SCC (Smart Cruise Control) behavior: reduce speed when dynamic obstacle detected
    # SCCëŠ” lane_selectorê°€ ë™ì  ìž¥ì• ë¬¼ì„ ê°ì§€í•˜ë©´ ìžë™ìœ¼ë¡œ í™œì„±í™”ë©ë‹ˆë‹¤.
    # ì†ë„ ê°ì†Œ ì„¤ì • ê°€ì´ë“œ:
    #   - 0.9 (ê³µê²©ì ): 10% ê°ì†, ë¹ ë¥¸ ì£¼í–‰ ìœ ì§€, ì¶©ëŒ ìœ„í—˜ ì¦ê°€
    #   - 0.7 (ê· í˜•):   30% ê°ì†, ì•ˆì „ì„±ê³¼ ì†ë„ ê· í˜• â† ê¸°ë³¸ê°’
    #   - 0.5 (ë³´ìˆ˜ì ): 50% ê°ì†, ë†’ì€ ì•ˆì „ì„±, ì£¼í–‰ ì†ë„ ëŠë¦¼
    scc_speed_gain: 0.9         # Speed multiplier when SCC active [0.0-1.0] (0.7 = 30% reduction)

    # Disparity-based obstacle avoidance (temporary activation during lane change)
    use_disparity: false                # Enable disparity mode during lane changes (true=disparity, false=lane switching)
    disparity_duration: 1.0             # Duration to use disparity mode during lane change (s)
    disparity_max_range: 10.0           # Maximum LiDAR range for disparity (m)
    disparity_threshold: 1.0            # Minimum disparity to consider as gap (m)
    disparity_car_half_width: 0.15      # Half car width for disparity (m)
    disparity_margin: 0.3               # Safety margin for disparity (m)
    disparity_max_speed: 4.5            # Max speed for disparity mode (m/s)
    disparity_min_speed: 4.0            # Min speed for disparity mode (m/s)
    disparity_max_steering: 0.4         # Max steering angle for disparity (rad, ~23 degrees)
    disparity_ld_min: 0.5               # Min lookahead distance (m)
    disparity_ld_max: 5.0               # Max lookahead distance (m)
    disparity_m_ld: 0.4                 # Lookahead slope (distance per m/s of speed)
    disparity_q_ld: 0.3                 # Lookahead offset (base distance in m)
    disparity_steering_alpha: 0.7       # Steering smoothing factor (0-1, higher = less smoothing)

    # ------------------------------------------------------------------------
    # Localization Configuration (TF-first approach)
    # ------------------------------------------------------------------------
    # Primary: Use TF (map -> base_link) for real-time localization
    use_tf_for_localization: true  # Recommended for real car
    tf_timeout: 0.1                 # TF lookup timeout (seconds)
    max_pose_age: 0.5               # Max age for fallback AMCL pose (seconds)

    # Fallback options (if TF fails)
    use_amcl_pose: false            # Fallback to AMCL topics
    use_odom_pose: false            # Fallback to odom (simulation mode)

    # ------------------------------------------------------------------------
    # Topic Configuration
    # ------------------------------------------------------------------------
    odom_topic: "/odom"             # Real car: /odom, Sim: /ego_racecar/odom
    amcl_topic: "/amcl_pose"        # AMCL localization topic
    imu_topic: "/sensors/imu/raw"              # IMU for acceleration compensation (f1tenth: /sensors/imu/raw)
    drive_topic: "/map_control/ackermann_cmd"  # Ackermann drive command output (goes to mux)

    # ------------------------------------------------------------------------
    # L1 Controller Parameters (from race_stack/forza)
    # ------------------------------------------------------------------------
    # Lookahead distance clipping
    t_clip_min: 2.5      # Minimum lookahead time [s] (aggressive: 0.8, conservative: 1.0)
    t_clip_max: 5.0      # Maximum lookahead time [s] (aggressive: 1.5, conservative: 2.0)

    # L1 lookahead calculation: L1 = q_l1 + m_l1 * speed
    m_l1: 0.6            # Lookahead slope (adaptive to speed)
    q_l1: 0.1          # Lookahead offset (aggressive: -0.18, conservative: 0.0)

    # Speed lookahead for delay compensation
    speed_lookahead: 0.25              # Time lookahead for speed selection [s]
    speed_lookahead_for_steer: 0.1     # Time lookahead for steering calculation [s]

    # Lateral error speed reduction
    lat_err_coeff: 0.5  # Coefficient for speed reduction based on lateral error [0-1]

    # Steering scaling based on acceleration
    acc_scaler_for_steer: 1.1   # Increase steering when accelerating
    dec_scaler_for_steer: 1.7   # Decrease steering when braking

    # Steering scaling based on speed
    start_scale_speed: 7.0     # Speed where steering starts to scale down [m/s]
    end_scale_speed: 8.0       # Speed where steering is fully scaled [m/s]
    downscale_factor: 0.0      # Maximum steering reduction factor at high speed

    # ------------------------------------------------------------------------
    # Steering Lookup Table
    # ------------------------------------------------------------------------
    # Options: 'NUC1_pacejka', 'NUC2_pacejka', '' (empty for kinematic fallback)
    steering_lut: "NUC2_pacejka"

    # ------------------------------------------------------------------------
    # Control Loop Configuration
    # ------------------------------------------------------------------------
    loop_rate_hz: 40.0

    # ========================================================================
    # Configuration Profiles (for reference)
    # ========================================================================
    # SIMULATION (Aggressive):
    #   use_tf_for_localization: false
    #   use_odom_pose: true
    #   t_clip_min: 0.8, t_clip_max: 1.5, q_l1: -0.18
    #
    # REAL CAR (Conservative):
    #   use_tf_for_localization: true
    #   use_amcl_pose: false (TF fallback only)
    #   t_clip_min: 1.0, t_clip_max: 2.0, q_l1: 0.0
    #
    # MULTI-LANE + TF (Current):
    #   use_tf_for_localization: true
    #   lane_csv_paths: [lane0, lane1, lane2]
    #   Balanced parameters for both sim and real car
    # ========================================================================
